input:
    job:
        package-manager: bundler
        allowed-updates:
            - dependency-type: direct
              update-type: all
        debug: true
        dependency-groups:
            - name: octicon
              rules:
                patterns:
                    - octicon*
        experiments:
            grouped-updates-prototype: true
        ignore-conditions:
            - dependency-name: octicons
              source: tests/smoke-bundler-octicon-bug.yaml
              version-requirement: '>19.4.0'
            - dependency-name: octicons_helper
              source: tests/smoke-bundler-octicon-bug.yaml
              version-requirement: '>19.4.0'
        source:
            provider: github
            repo: dependabot/smoke-tests
            directory: /bugs/bundler-octicon-bug/manifests
            commit: b99f0bd604551d81c48b7b3e99775592de8b8d68
            hostname: github.com
            api-endpoint: https://api.github.com/
        vendor-dependencies: true
        commit-message-options: {}
        credentials-metadata:
            - host: github.com
              type: git_source
        max-updater-run-time: 2700
    credentials:
        - host: github.com
          password: $LOCAL_GITHUB_ACCESS_TOKEN
          type: git_source
          username: x-access-token
output:
    - type: record_package_manager_version
      expect:
        data:
            ecosystem: bundler
            package-managers:
                bundler: "2"
    - type: update_dependency_list
      expect:
        data:
            dependencies:
                - name: octicons
                  requirements:
                    - file: Gemfile
                      groups:
                        - default
                      requirement: ~> 19.2
                      source: null
                  version: 19.2.0
                - name: octicons_helper
                  requirements:
                    - file: Gemfile
                      groups:
                        - default
                      requirement: ~> 19.2
                      source: null
                  version: 19.2.0
                - name: actionpack
                  requirements: []
                  version: 7.0.6
                - name: actionview
                  requirements: []
                  version: 7.0.6
                - name: activesupport
                  requirements: []
                  version: 7.0.6
                - name: builder
                  requirements: []
                  version: 3.2.4
                - name: concurrent-ruby
                  requirements: []
                  version: 1.2.2
                - name: crass
                  requirements: []
                  version: 1.0.6
                - name: erubi
                  requirements: []
                  version: 1.12.0
                - name: i18n
                  requirements: []
                  version: 1.14.1
                - name: loofah
                  requirements: []
                  version: 2.21.3
                - name: method_source
                  requirements: []
                  version: 1.0.0
                - name: mini_portile2
                  requirements: []
                  version: 2.8.2
                - name: minitest
                  requirements: []
                  version: 5.18.1
                - name: nokogiri
                  requirements: []
                  version: 1.15.2
                - name: racc
                  requirements: []
                  version: 1.7.1
                - name: rack
                  requirements: []
                  version: 2.2.7
                - name: rack-test
                  requirements: []
                  version: 2.1.0
                - name: rails-dom-testing
                  requirements: []
                  version: 2.1.1
                - name: rails-html-sanitizer
                  requirements: []
                  version: 1.6.0
                - name: railties
                  requirements: []
                  version: 7.0.6
                - name: rake
                  requirements: []
                  version: 13.0.6
                - name: thor
                  requirements: []
                  version: 1.2.2
                - name: tzinfo
                  requirements: []
                  version: 2.0.6
                - name: zeitwerk
                  requirements: []
                  version: 2.6.8
            dependency_files:
                - /bugs/bundler-octicon-bug/manifests/Gemfile
                - /bugs/bundler-octicon-bug/manifests/Gemfile.lock
    - type: create_pull_request
      expect:
        data:
            base-commit-sha: b99f0bd604551d81c48b7b3e99775592de8b8d68
            dependencies:
                - name: octicons
                  previous-requirements:
                    - file: Gemfile
                      groups:
                        - default
                      requirement: ~> 19.2
                      source: null
                  previous-version: 19.2.0
                  requirements:
                    - file: Gemfile
                      groups:
                        - default
                      requirement: ~> 19.4
                      source: null
                  version: 19.4.0
            updated-dependency-files:
                - content: |
                    # frozen_string_literal: true

                    source "https://rubygems.org"

                    git_source(:github) {|repo_name| "https://github.com/#{repo_name}" }

                    gem "octicons", "~> 19.4"
                    gem "octicons_helper", "~> 19.2"
                  content_encoding: utf-8
                  deleted: false
                  directory: /bugs/bundler-octicon-bug/manifests
                  name: Gemfile
                  operation: update
                  support_file: false
                  type: file
                - content: |
                    GEM
                      remote: https://rubygems.org/
                      specs:
                        actionpack (7.0.6)
                          actionview (= 7.0.6)
                          activesupport (= 7.0.6)
                          rack (~> 2.0, >= 2.2.4)
                          rack-test (>= 0.6.3)
                          rails-dom-testing (~> 2.0)
                          rails-html-sanitizer (~> 1.0, >= 1.2.0)
                        actionview (7.0.6)
                          activesupport (= 7.0.6)
                          builder (~> 3.1)
                          erubi (~> 1.4)
                          rails-dom-testing (~> 2.0)
                          rails-html-sanitizer (~> 1.1, >= 1.2.0)
                        activesupport (7.0.6)
                          concurrent-ruby (~> 1.0, >= 1.0.2)
                          i18n (>= 1.6, < 2)
                          minitest (>= 5.1)
                          tzinfo (~> 2.0)
                        builder (3.2.4)
                        concurrent-ruby (1.2.2)
                        crass (1.0.6)
                        erubi (1.12.0)
                        i18n (1.14.1)
                          concurrent-ruby (~> 1.0)
                        loofah (2.21.3)
                          crass (~> 1.0.2)
                          nokogiri (>= 1.12.0)
                        method_source (1.0.0)
                        mini_portile2 (2.8.2)
                        minitest (5.18.1)
                        nokogiri (1.15.2)
                          mini_portile2 (~> 2.8.2)
                          racc (~> 1.4)
                        octicons (19.4.0)
                        octicons_helper (19.4.0)
                          actionview
                          octicons (= 19.4.0)
                          railties
                        racc (1.7.1)
                        rack (2.2.7)
                        rack-test (2.1.0)
                          rack (>= 1.3)
                        rails-dom-testing (2.1.1)
                          activesupport (>= 5.0.0)
                          minitest
                          nokogiri (>= 1.6)
                        rails-html-sanitizer (1.6.0)
                          loofah (~> 2.21)
                          nokogiri (~> 1.14)
                        railties (7.0.6)
                          actionpack (= 7.0.6)
                          activesupport (= 7.0.6)
                          method_source
                          rake (>= 12.2)
                          thor (~> 1.0)
                          zeitwerk (~> 2.5)
                        rake (13.0.6)
                        thor (1.2.2)
                        tzinfo (2.0.6)
                          concurrent-ruby (~> 1.0)
                        zeitwerk (2.6.8)

                    PLATFORMS
                      ruby

                    DEPENDENCIES
                      octicons (~> 19.4)
                      octicons_helper (~> 19.2)

                    BUNDLED WITH
                       2.1.4
                  content_encoding: utf-8
                  deleted: false
                  directory: /bugs/bundler-octicon-bug/manifests
                  name: Gemfile.lock
                  operation: update
                  support_file: false
                  type: file
                - content: ""
                  content_encoding: ""
                  deleted: true
                  directory: /bugs/bundler-octicon-bug/manifests
                  name: vendor/cache/octicons-19.2.0.gem
                  operation: delete
                  support_file: false
                  type: file
                - content: 85aa478bc042cfdcfa2a9f01833f53c376b9a252c7691594303ce0d25e15b132
                  content_encoding: sha256
                  deleted: false
                  directory: /bugs/bundler-octicon-bug/manifests
                  name: vendor/cache/nokogiri-1.15.2.gem
                  operation: create
                  support_file: false
                  type: file
                  mode: "100644"
                - content: 1f540b216dc3de631e7a34ecad4b59967163ca1f8aeb7cc779bbc769fffbdebc
                  content_encoding: sha256
                  deleted: false
                  directory: /bugs/bundler-octicon-bug/manifests
                  name: vendor/cache/octicons-19.4.0.gem
                  operation: create
                  support_file: false
                  type: file
                  mode: "100644"
                - content: 4e84c6e81789b2638ba138749d9b81c944a76a3156f5bfb1b6aa9eeade36d124
                  content_encoding: sha256
                  deleted: false
                  directory: /bugs/bundler-octicon-bug/manifests
                  name: vendor/cache/octicons_helper-19.4.0.gem
                  operation: create
                  support_file: false
                  type: file
                  mode: "100644"
            pr-title: Bump the octicon group in /bugs/bundler-octicon-bug/manifests with 1 update
            pr-body: |
                Bumps the octicon group in /bugs/bundler-octicon-bug/manifests with 1 update: [octicons](https://github.com/primer/octicons_gem).

                <details>
                <summary>Commits</summary>
                <ul>
                <li>See full diff in <a href="https://github.com/primer/octicons_gem/commits">compare view</a></li>
                </ul>
                </details>
                <br />
            commit-message: |-
                Bump the octicon group

                Bumps the octicon group in /bugs/bundler-octicon-bug/manifests with 1 update: [octicons](https://github.com/primer/octicons_gem).

                - [Commits](https://github.com/primer/octicons_gem/commits)
            dependency-group:
                name: octicon
    - type: mark_as_processed
      expect:
        data:
            base-commit-sha: b99f0bd604551d81c48b7b3e99775592de8b8d68
